# State - 2026-01-07

- Devcontainer now runs stop logic via an entrypoint trap; `post-stop.sh` removed.
- `devcontainer.json` cleanup: removed `initializeCommand` and `postStopCommand`, moved `CONTAINER_*` to `containerEnv`.
- Dockerfile now installs the entrypoint and sets `ENTRYPOINT`.
- `.env.example` now uses literal values to stay compatible with Docker `--env-file`.
- Pending: rebuild the devcontainer to confirm the entrypoint copy succeeds and the stop hook runs on shutdown.
- `--env-file` removed from `.devcontainer/devcontainer.json` to avoid unexpanded values; scripts/localEnv are now the source of truth.
- `.env.example` notes updated to reflect scripts/localEnv expansion behavior.
- `.devcontainer/scripts/colors.sh` now uses raw ANSI escapes so init output renders without literal `\[ \]`.
- `claude-launch.sh` now resolves its directory using `cd --`/`dirname --` for safer path handling.
- `devcontainer-launch.sh` now uses `cd --`/`dirname --` and derives container names from `PROJECT_NAME`.
- `editor-launch.sh` now resolves its directory using `cd --`/`dirname --`.
- `.devcontainer/Dockerfile` installs `ca-certificates` and uses `DEBIAN_FRONTEND=noninteractive` for apt.
- `.devcontainer/devcontainer.json` now uses `PROJECT_NAME`, `WORKSPACE_FOLDER`, and an explicit image tag; `WORKSPACE_FOLDER` is documented in `.env.example`.
- `.devcontainer/scripts/verify-git-ssh.sh` now requires a git host argument or `GIT_SSH_HOST`.
- `.devcontainer/scripts/ssh-agent-setup.sh` now returns or exits cleanly if already initialized.
- `.devcontainer/scripts/post-create.sh` now fails fast without SSH agent forwarding and guards `VSCODE_SHELL_LOGIN` in `.bashrc`.
- `.devcontainer/scripts/env-loader.sh` now requires `WORKSPACE_FOLDER` or an explicit path, preserves `SSH_AUTH_SOCK`, and reports newly added vars in debug mode.
- `.devcontainer/scripts/bash-prompt.sh` now disables nounset to avoid VS Code shell integration issues.
- `.env` now defines `WORKSPACE_FOLDER=/workspace` for the env loader.
- `.env` now uses unquoted values for shell-sourced variables.
- `.env` keeps quotes for `GIT_USER_NAME` to allow spaces.
